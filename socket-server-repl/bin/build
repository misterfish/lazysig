#!/bin/bash

bindir=$(dirname "$0")

. "$bindir"/functions.bash

USAGE="Usage: $0"

main_hs=("server.hs" "client.hs")
opts='-i../parser/'

chd "$bindir"/..

go() {
    local src
    local idx
    local rc=0
    for idx in ${!main_hs[@]}; do
        src=${main_hs[$idx]}
        if ! cmd ghc "$opts" "$src"; then
            rc=1
        fi
    done
    return $rc
}; go
